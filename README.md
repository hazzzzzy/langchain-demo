## 一些笔记

### qa数据库作用：

few-shot 少样本示例，针对特定问题使用特定方法

### 关于匹配不准有几个方法

#### 1、修改表结构描述，凸显表的主要功能，例如：

- ❌ 现在的可能写法：
    - tb_order: 订单表，存储订单信息。
    - tb_order_room: 房单表，存储房间预订信息。
    - (评价：这就叫撞车。AI 根本分不清“订单信息”和“房间预订信息”的区别。)
- ✅ 推荐的写法（基于业务场景）：
    - tb_order: 交易流水与支付记录。包含订单总金额、支付状态、下单人联系方式。不包含具体的入住时间或房间号。
    - tb_order_room: 每日房态与排房记录。包含具体的入离时间、房间号分配、每日房价、库存占用情况。
    - (评价：加入了“交易”、“支付” vs “房态”、“库存占用”。当用户问“预订情况/还有房吗”时，“库存/房态”的向量权重会把
      tb_order_room 拉上来。)

#### 2、也就是第一大点所说的few-shot

### 几种rag检索方式

#### 1、相似度匹配

- 同质化严重：比如你搜“手机”，它可能给你返回 5 段几乎一模一样的话，浪费了 Token，却漏掉了其他关键信息。
- 关键词匹配弱：向量擅长理解语义（“苹果”和“水果”），但不擅长精确匹配（比如数据库里的专有名词 tb_order_2023_v2）。

#### 2、MMR (Maximal Marginal Relevance) —— 最大边际相关性

- 原理：它不仅仅找“最相似”的，还在找“最不一样”的。它试图在“相关性”和“多样性”之间寻找平衡。
- Text2SQL 场景痛点：
    - 用户问：“查一下用户的订单金额”。
    - 普通搜索：可能返回 tb_user 表的 5 个片段（因为“用户”这个词权重高），结果把 tb_order 表挤出去了。
    - MMR 搜索：它先选出最相关的 tb_user，然后发现剩下的结果里 tb_user 太雷同了，于是它会强行去捞一个跟 tb_user
      差别很大但跟问题也有点关系的 tb_order。

#### 3、Similarity Score Threshold —— 阈值过滤

#### 4、Hybrid Search (混合检索) —— 向量 + 关键词